<?xml version="1.0" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <targets>
    <!--archiveAboveSize (in bytes) 
      2MB->2097152 bytes
      3MB->3145728 bytes
      5MB->5242880 bytes
      10MB->10485760
    -->
    <target name="CreateOrderServiceLogger" xsi:type="File" fileName="${basedir}/VendorOrderProcessServiceLogs/${shortdate}/CreateOrderService.txt"
            archiveFileName="${basedir}/VendorOrderProcessServiceLogs/${shortdate}/archives/CreateOrderService.{#######}.txt" archiveAboveSize="2097152"
            archiveNumbering="Sequence"/>
    <target name="UpdateOrderServiceLogger" xsi:type="File" fileName="${basedir}/VendorOrderProcessServiceLogs/${shortdate}/UpdateOrderService.txt"
            archiveFileName="${basedir}/VendorOrderProcessServiceLogs/${shortdate}/archives/UpdateOrderService.{#######}.txt" archiveAboveSize="2097152"
            archiveNumbering="Sequence"/>
    <target name="BkgOrderStatusServiceLogger" xsi:type="File" fileName="${basedir}/VendorOrderProcessServiceLogs/${shortdate}/BkgOrderStatusService.txt"
            archiveFileName="${basedir}/VendorOrderProcessServiceLogs/${shortdate}/archives/BkgOrderStatusService.{#######}.txt" archiveAboveSize="2097152"
            archiveNumbering="Sequence"/>
    <target name="JiraTicketServiceLogger" xsi:type="File" fileName="${basedir}/VendorOrderProcessServiceLogs/${shortdate}/JiraTicketServiceLog.txt"
            archiveFileName="${basedir}/VendorOrderProcessServiceLogs/${shortdate}/archives/JiraTicketServiceLog.{#######}.txt" archiveAboveSize="2097152"
            archiveNumbering="Sequence"/>
	<target name="CreateOrderServiceDBLogger" xsi:type="Database"
			connectionString="data source=172.16.1.33\SQL2014DEV;initial catalog=ApplicationLog;persist security info=True;user id=adb_adb20;password=adb_adb20;multipleactiveresultsets=True;"
			commandText="EXEC usp_InsertCreateOrderServiceLog
				@CallSite,
				@Level,
				@Logger,
				@Date,
				@Exception,
				@Message,
				@StackTrace,
				@Thread,
				@ServiceContextKey">
		<parameter name="@CallSite" layout="${callsite:filename=true}" />
		<parameter name="@Level" layout="${level}" />
		<parameter name="@Logger" layout="${logger}" />
		<parameter name="@Date" layout="${longdate}" />
		<parameter name="@Exception" layout="${exception}" />
		<parameter name="@Message" layout="${message}" />
		<parameter name="@StackTrace" layout="${exception:format=ToString,StackTrace}${newline}" />
		<parameter name="@Thread" layout="${threadid}" />
		<parameter name="@ServiceContextKey" layout="${gdc:ServiceContextKey}" />
	</target>
	<target name="UpdateOrderServiceDBLogger" xsi:type="Database"
			connectionString="data source=172.16.1.33\SQL2014DEV;initial catalog=ApplicationLog;persist security info=True;user id=adb_adb20;password=adb_adb20;multipleactiveresultsets=True;"
			commandText="EXEC usp_InsertUpdateOrderServiceLog
			@CallSite,
			@Level,
			@Logger,
			@Date,
			@Exception,
			@Message,
			@StackTrace,
			@Thread,
			@ServiceContextKey">
		<parameter name="@CallSite" layout="${callsite:filename=true}" />
		<parameter name="@Level" layout="${level}" />
		<parameter name="@Logger" layout="${logger}" />
		<parameter name="@Date" layout="${longdate}" />
		<parameter name="@Exception" layout="${exception}" />
		<parameter name="@Message" layout="${message}" />
		<parameter name="@StackTrace" layout="${exception:format=ToString,StackTrace}${newline}" />
		<parameter name="@Thread" layout="${threadid}" />
		<parameter name="@ServiceContextKey" layout="${gdc:ServiceContextKey}" />
	</target>
	<target name="BkgOrderStatusServiceDBLogger" xsi:type="Database"
			connectionString="data source=172.16.1.33\SQL2014DEV;initial catalog=ApplicationLog;persist security info=True;user id=adb_adb20;password=adb_adb20;multipleactiveresultsets=True;"
			commandText="EXEC usp_InsertBkgOrderStatusServiceLog
			@CallSite,
			@Level,
			@Logger,
			@Date,
			@Exception,
			@Message,
			@StackTrace,
			@Thread,
			@ServiceContextKey">
		<parameter name="@CallSite" layout="${callsite:filename=true}" />
		<parameter name="@Level" layout="${level}" />
		<parameter name="@Logger" layout="${logger}" />
		<parameter name="@Date" layout="${longdate}" />
		<parameter name="@Exception" layout="${exception}" />
		<parameter name="@Message" layout="${message}" />
		<parameter name="@StackTrace" layout="${exception:format=ToString,StackTrace}${newline}" />
		<parameter name="@Thread" layout="${threadid}" />
		<parameter name="@ServiceContextKey" layout="${gdc:ServiceContextKey}" />
	</target>
	<target name="JiraTicketServiceDBLogger" xsi:type="Database"
			  connectionString="data source=172.16.1.33\SQL2014DEV;initial catalog=ApplicationLog;persist security info=True;user id=adb_adb20;password=adb_adb20;multipleactiveresultsets=True;"
			  commandText="EXEC usp_InsertJiraTicketServiceLog
				@CallSite,
				@Level,
				@Logger,
				@Date,
				@Exception,
				@Message,
				@StackTrace,
				@Thread,
				@ServiceContextKey">
		  <parameter name="@CallSite" layout="${callsite:filename=true}" />
		  <parameter name="@Level" layout="${level}" />
		  <parameter name="@Logger" layout="${logger}" />
		  <parameter name="@Date" layout="${longdate}" />
		  <parameter name="@Exception" layout="${exception}" />
		  <parameter name="@Message" layout="${message}" />
		  <parameter name="@StackTrace" layout="${exception:format=ToString,StackTrace}${newline}" />
		  <parameter name="@Thread" layout="${threadid}" />
		  <parameter name="@ServiceContextKey" layout="${gdc:ServiceContextKey}" />
	  </target>
  </targets>
  <rules>
    <logger name="CreateOrderServiceLogger" minlevel="Info" writeTo="CreateOrderServiceLogger,CreateOrderServiceDBLogger" />
    <logger name="UpdateOrderServiceLogger" minlevel="Info" writeTo="UpdateOrderServiceLogger,UpdateOrderServiceDBLogger" />
    <logger name="BkgOrderStatusServiceLogger" minlevel="Info" writeTo="BkgOrderStatusServiceLogger,BkgOrderStatusServiceDBLogger" />
    <logger name="JiraTicketServiceLogger" minlevel="Info" writeTo="JiraTicketServiceLogger,JiraTicketServiceDBLogger" />
  </rules>
</nlog>
